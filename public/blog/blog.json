{
  "posts": [

    {
      "id": "p4",
      "title": "Creating a D3 Bubble Chart",
      "url": "d3bubblechart",
      "teaser": "Use D3 and D3Force to create a dynamic bubble chart",
      "date": "Jan 30, 2016",
      "content": [
        ["p", "This tutorial is a walkthrough of creating an interactive d3 bubble chart. The first step is to load both the standard d3 library, as well as the d3-force add-ons. They can both be found easily by searching on google, and should be inserted into the head of the relevant HTML file as shown:"],
        ["img", "/public/blog/d3bubble/d31.JPG"],
        ["p", "The two libraries can be brought in using npm very easily, with the command ‘npm I –save react-d3 d3-force’. On a standard HTML file, the libraries should be loaded in the head, with the main d3 library being brought in first. On this file I have also included a link to the javascript file I will be writing the D3 code in, and am loading that script at the end of the body. The reason for this is because this code will be manipulating the DOM so I need this script to load after the body has been written on the page. Onto the D3 code:"],
        ["img", "/public/blog/d3bubble/d32.JPG"],
        ["p", "There are 3 a few things being done here. The first is declaring variables for height and width, that will be used later."],
        ["h3", "d3.select and d3.selectAll"],
        ["p", "Next I use the d3 ‘select’ method. The way select works is that it selects the first item that matches its argument. We can use regular CSS selectors, so the code on line 4 will select the first svg element on the page. We can also select by class or ID, such as (‘#id_here’) or (‘.classname_here’). There is another method d3.selectAll that does the same thing as select, only it returns an array of all matched items, not just the first item found. In this case I used d3.select because I know there will only be one svg element on the page."],
        ["p", "Once I have selected the svg, I can give it some attributes using ‘.attr’ on likes 5 and 6, as well as apply styles with ‘.style’ on lines 7 and 8. So I have given the svg the height and width I declared earlier, as well as applied a border margin."],
        ["p", "On line 10 I hardcoded in an array of data. In a real project this data is likely coming from a database, Ajax request, etc. But for the purposes of this example I’m simply going to create the data right here on the page."],
        ["img", "/public/blog/d3bubble/d33.JPG"],
        ["h3", "d3.min and d3.max"],
        ["p", "On lines 18 and 19 I am using the d3 min and max functions. These take in an array of data, and then a second parameter that the data should be sorted by. For instance with the d3.min function I am calling, I pass in the array of data, as well as a function that implicitly returns the population attribute for each piece of data. The min function then finds the minimum value, and it is saved to the rMin variable in this example."],
        ["h3", "d3.scaleLinear"],
        ["p", "The reason for finding the maximum and minimum values is to input them into a linear scale. The scale is helpful because it can normalize an array of data and produce values on a scale that works better. The scale is created using d3.scaleLinear(), although in version 3 of react the code should be d3.scale.linear(). We can supply a domain of the min and max values that we just calculated, and then a range that we wish those values to be distributed along. In this case, the populations that ranged from 13 to 39 will now spread from 20 to 50. This will make sense in just a moment when we are sizing the bubbles in the chart."],
        ["h3", "Data and Enter methods"],
        ["p", "The next block of code is selecting the svg (which we saved to the variable svg earlier), and from it, selecting everything with the class of ‘node’. Now, obviously at this point in the code there is nothing with the class of node. The way d3 works is that it can retroactively select items after they have been created, so while these elements with the class named node do not exist now, if we create them later, this selection will work."],
        ["p", "The next line calls the ‘.data’ method, which allows us to bind our data to these elements with the class node. In this case I saved the data to the variable data, so the code is ‘.data(data)’.  Then we call the ‘enter’ method. The enter method will create elements for each data point that does not have a corresponding element to bind to. In this case, none of the data points have an element to bind to (we selected items with a class name of node, of which there are none), so the enter method will bind all 5 data points to new elements. These elements do not have a tag, so we call ‘.append(‘g’)’ which will add ‘g’ (for group) tags to each data point. The last line of code is to give these g elements the class of node."],
        ["p", "This was a lot, and fairly confusing, so to summarize each line:"],
        ["ol", ["24. Select the svg element.", "25. Select all items or future items with the class of node.", "26. Bind our data array to these elements.", "27. Create new elements if there are not enough for each data point.", "28. Append a ‘g’ element to these elements.", "29. Give these elements the class name of node."]],
        ["p", "Another way to think of this code is that some of it is being run though twice. On the first run-through, there are no elements with the class of node, so the data doesn’t have anything to bind to. On the ‘enter’ method we create new elements for the data, add a ‘g’ element to them, then give them the class name of node. ONLY NOW that they have the class of node, they are selected on line 25, and binded to the data."],
        ["img", "/public/blog/d3bubble/d34.JPG"],
        ["p", "Next we select the node elements and add a ‘circle’ to them. On the circle we can give it an ‘r’ attribute, which is the radius. This is where the linear scale we made is used. Instead of just passing in the population for each node to be its radius, we can pass in the linear scale function (saved as circleScale) with the population as the argument. Since we are using the scale, we are guaranteed that all circles will proportionally have a radius between 20 and 50px."],
        ["h3", "D3-Force"],
        ["p", "The next step is to setup the force layout. On like 35 I call the d3.forceSimulation method, which creates the force for our svg. On like 36 I call the ‘.force’ method, which takes 2 parameters, a name and a force. The name can be whatever we want, and I call it ‘x’ here. Then we pass in the force being applied. The first force we need is a horizontal force, that will push our circles where we want on the X axis. D3-force has a function for this, d3.forceX. Here I will pass in (width/2), which is half of the previously defined svg width from line 2. This will push all the circles toward that point in the svg. We also apply a ‘strength’ function to the force, to tell d3 how much power should be behind this force. A higher strength number would overpower other weaker forces. I do the same thing on line 37, only with the d3.forceY function and pass in (height/2). I also made sure to use the same strength as I did with the X force, or else one of the forces would overpower the other."],
        ["p", "The last force I apply is the forceCollide function. forceCollide is the force that keeps all of the circles from bumping into each other, and we can pass in a function to tell d3 how much room from each circle’s midpoint there should be from the next circle. In this case, we just need to pass in the radius of each circle, which again was the population put through the circleScale function. We also could add some additional padding if we wanted, which would have looked like: ‘d3.forceCollide((d) => circleScale(d.population) + 10)’."],
        ["img", "/public/blog/d3bubble/d35.JPG"],
        ["p", "The final code to get our initial chart is above. On line 40 I bind the data points to the force simulation. I then call the ‘.on’ method on it, which will call a ‘ticked’ method on every tick of the d3 force. The ticked method is defined below, which selects all the circles, and passes in their correct x and y positions. The way the ticked method works isn’t too important, just know that it is called repeatedly. Below are the results of the code written thus far:"],
        ["img", "/public/blog/d3bubble/d36.JPG"],
        ["p", "As you can see, all the circles are pushed together in the middle of both the X and Y axis. They are also different sizes, as each circle’s radius is the result of the circleScale method called on its population value."],
        ["h3", "Making a tooltip"],
        ["p", "Next we need a way to label the data. One option would be to put text over each bubble, but that doesn’t always work nicely in a bubble chart if any of the bubbles are small. An option I prefer is to use a tooltip, which moves dynamically around the screen when each bubble is hovered over."],
        ["img", "/public/blog/d3bubble/d37.JPG"],
        ["p", "The code for the tooltip is above. I started by selecting the body (In practice I would select the innermost div to the svg, but in this example I put only an svg in the body for simplicity). I appended a div to the body using the ‘.append’ method, and gave it the class ‘tooltip’ using the ‘.classed’ method. I then gave it some basic styling (which could also have been done in the css file using the ‘.tooltip’ selector). The most important styling is position absolute, and 0 opacity."],
        ["h3", "Using the ‘.on’ method"],
        ["p", "The next step is to select all the circles and give them a ‘.on’ method for the mouseover event, passing in the circles data as an argument. On line 63 I printed out what ‘c’ is when I first hovered over a circle, and we can see it gives us access to the data itself, as well as its position on the screen."],
        ["img", "/public/blog/d3bubble/d38.JPG"],
        ["p", "Inside the mouseover method I make a few important stylistic changes to the tooltip:"],
        ["ol", ["1. Change the opacity to 1.", "2. Give it a high z-index (anything above 0).", "3. Position vertically 50px from the circle’s position (-50 means 50px higher).", "4. Position horizontally at the circle’s position.", "5. Give it a text attribute of the state name."]],
        ["p", "Then on mouseout, change the opacity back to 0 and the z-index to -1. What this code does is move the tooltip div to be placed directly above whichever bubble we are hovering over. The reason I put the z-index to -1 on mouseout, is that if we did not change the z-index the tooltip would be on ‘top’ of the svg elements, and while invisible, it would not allow for the mouseover event to work on any covered bubbles. Changing the z-index to anything less than 0 fixes this problem. Just for fun I also added a small triangle onto the tooltip using CSS:"],
        ["img", "/public/blog/d3bubble/d39.JPG"],
        ["p", "The updated behavior is shown below."],
        ["img", "/public/blog/d3bubble/d3gif1.gif"],
        ["h3", "Adding a background"],
        ["p", "The next step in our chart is to add a background. This can be done using the HTML ‘pattern’ element. The first step is to find images for each data point, I found some online and added them to the data objects as seen below under the image attribute."],
        ["img", "/public/blog/d3bubble/d310.JPG"],
        ["p", "Next comes creating the patterns. To do these, I selected the nodes and appended a pattern. Each pattern is given a unique id, for simplicity I chose the image attribute. The id cannot have spaces in it, which is why I did not choose the state name. Ideally the data would come with an id property, which is a lot more intuitive to use than an image url. The rest of the code here is all needed to format the image to fit into the bubble properly. At the end, I set the image link to be the image attribute for each piece of data."],
        ["img", "/public/blog/d3bubble/d311.JPG"],
        ["p", "Next, I changed the fill attribute of the circles from blue to the patterns that we just created. I specified the image by referencing the unique IDs I just created in the last section, which will bind those patterns to these circles. I also added a stroke and stroke-width (which are like border for svg based elements) for styling purposes. The result is shown below:"],
        ["img", "/public/blog/d3bubble/d312.JPG"],
        ["p", "And here is the result of these changes:"],
        ["img", "/public/blog/d3bubble/d313.JPG"]
      ]
    },

    {
      "id": "p3",
      "title": "ReactCSSTransitionGroup",
      "url": "reactcsstransitiongroup",
      "teaser": "How to utilize the ReactCSSTransitionGroup to transition between components in React",
      "date": "Jan 22, 2016",
      "content": [
        ["h3", "Transitions using CSS"],
        ["p", "Transitions in CSS are easy. Simply add a transition property to the appropriate selector, specify which property is to be changed, the duration of the transition, pace and an optional delay. An example of transitioning the color and size of h1 elements is shown below, where each transition will last a half second. "],
        ["img", "/public/blog/reactcsstransition/transition4.JPG"],
        ["p", "These CSS transitions work just fine in React and can be used all over your code to create a smoother and more dynamic-feeling user experience. One of the benefits of React is the way that pages re-render themselves on state changes, adding and removing the appropriate components. Using transitions for these changes would be much more challenging than a typical CSS transition, and would require some pretty complex code in the React lifecycle methods for each component to properly add and remove the appropriate classes at the correct time. Fortunately, there is an extremely helpful add-on called the ReactCSSTransitionGroup which does all the heavy lifting for us."],
        ["h3", "ReactCSSTransitionGroup"],
        ["p", "The way the ReactCSSTransitionGroup works is that is can be attached to any component or array of components, and trigger transitions or animations when these components enter the DOM, leave the DOM, or first appear on a page load. I’ve created a simple app example that features 2 main components, List and ListItem. The code is below for reference:"],
        ["img", "/public/blog/reactcsstransition/transition1.JPG"],
        ["img", "/public/blog/reactcsstransition/transition2.JPG"],
        ["img", "/public/blog/reactcsstransition/transition3.JPG"],
        ["p", "The functionality works, where clicking an item will remove it from the DOM, while entering new info into the inputs and clicking the submit button will add a new ListItem to the DOM. While the functionality is nice, the sudden changes are a bit too abrupt and would clearly be better with some simple transitions. Below is the current behavior:"],
        ["img", "/public/blog/reactcsstransition/transitiongif1.gif"],
        ["h3", "Installing from NPM"],
        ["p", "So how could we animate this with the ReactCSSTransitionGroup? Pretty easily, actually. The first step is to install the add-on using npm, with the command ‘npm i –save react-addons-css-transition-group’. Next we will require it in the appropriate component. Now, the component we are looking to animate is ListItem, however we do NOT want to use the ReactCSSTransitionGroup on that element. This is because the ReactCSSTransitionGroup must already be mounted on the DOM for it to trigger the enter animation, and must remain on the DOM after an element is removed to trigger the removal animation. For these reasons, we are going to require it in the List component, even though we are not animating the List."],
        ["img", "/public/blog/reactcsstransition/transition5.JPG"],
        ["p", "Once we have required the group, we treat it just like any other element and place it right inside of the return method in our component. Place the ReactCSSTransitionGroup (or whatever you want to save the name as when you first required it) surrounding the element/s that you wish to transition. Also be sure to have supplied a key to these elements, which are needed for the transitions to work. There are a few properties to specify inside of the element tag:"],
        ["ol", ["transitionName (this is what the class will be called in the CSS file)", "transitionEnterTimeout (the amount of time the enter transition – including any delay – should take)", "transitionLeaveTimeout (the amount of time the exit transition should last)", "Optional: transitionAppear and transitionAppearTimeout. These are for using a transition on the initial page load. transitionAppear is, by default, set to false, so to trigger an appear animation it must be set to {true} and the appear timeout should also be specified."]],
        ["p", "Make sure that the ‘key’ given to each element that can be transitioned is not only unique with the current state of like items, but would remain unique if compared to a future or past state of the items. In other words, do NOT use the index, since if an item with index of 2 is removed, on the next render there could still be an item with an index of 2. This would confuse the ReactCSSTransitionGroup addon, so an easy fix is to make the key something completely unique, as I have done here by using the name property of each object. In practice this still is not a perfect key since we could theoretically want multiple people with the same name in our list, but for simplicity it is unique enough for this example."],
        ["img", "/public/blog/reactcsstransition/transition6.JPG"],
        ["h3", "Adding ReactCSSTransitionGroup to React code"],
        ["p", "I have created the transitionEnterTimeout and transitionLeave timeout, and set them both to 500ms. I also named the transition ‘li-trans’."],
        ["img", "/public/blog/reactcsstransition/transition7.JPG"],
        ["p", "Now let’s look at the CSS:"],
        ["img", "/public/blog/reactcsstransition/transition8.JPG"],
        ["p", "The way this works is that the we are given a few classes based on the name of the transition. I named the transition ‘li-trans’ (you can name the transition whatever you like). For the enter transition, there are 2 classes to write:"],
        ["ol", ["*name of transition*-enter (this is how the new element will appear when it first enters the DOM)", "*name of transition*-enter-active (this is how the new element will appear at the end of the transition)"]],
        ["p", "What ReactCSSTransitionGroup does under the hood is add the ‘enter’ class to your new element the instant it enters the DOM, and on the next ‘tick’, the ‘enter-active’ class is added. Therefore we also need to add the transition property in the CSS, as the ReactCSSTransitionGroup is not really doing any transitioning at all, it is merely just adding classes at the appropriate time. The same holds true for leave animations:"],
        ["ol", ["*name of transition*-leave (How the element should appear as the leave transition begins)", "*name of transition*-leave-active (How the element should appear at the end of the transition)"]],
        ["p", "Now let’s see how these transitions look:"],
        ["img", "/public/blog/reactcsstransition/transitiongif2.gif"],
        ["p", "As we see here, when a new list item is first added to the DOM it uses the rotateY transition we gave it, which takes 500ms. When we remove an element it first completes the transition from scale(1) to scale(0). Easy!"],
        ["h3", "Animate on page load with transitionAppear"],
        ["p", "The transitionEnter animation triggers when a component enters the already-existing DOM, so to animate on page load we can use the transitionAppear property. The first step is to set transitionAppear to true, says by default it does not trigger. And as was with enter and leave, specify a duration for the animation."],
        ["img", "/public/blog/reactcsstransition/transition9.JPG"],
        ["p", "Here is the code for the CSS, along with the resulting affect when the page is refreshed/first loaded. The same rules apply as with the ‘enter’ animations, only the keyword this time is ‘appear’. In this example I also decided to use a CSS animation and not just a transition."],
        ["img", "/public/blog/reactcsstransition/transition10.JPG"],
        ["img", "/public/blog/reactcsstransition/transitiongif3.gif"]


      ]
    },



    {
      "id": "p2",
      "title": "Hoisting",
      "url": "hoisting",
      "teaser": "What 'hoisting' really means in JS",
      "date": "Jan 20, 2016",
      "content": [
        ["p", "Hoisting is a concept to help us humans understand how JavaScript runs code. However, it is NOT actually how the JavaScript engine works. The idea of hoisting is that variable and function declarations are ‘moved’ to the beginning of code at runtime. That would explain how JavaScript is able to run and evaluate the following code, even though the printStuff function is called before it is declared:"],
        ["img", "/public/blog/scope/example1.JPG"],
        ["p", "But while this works nicely for a function declaration, what about a variable declaration?"],
        ["img", "/public/blog/scope/example2.JPG"],
        ["p", "Here, undefined is printed. So hoisting must not have happened, right? Let’s consider another example:"],
        ["img", "/public/blog/scope/example3.JPG"],
        ["p", "With this code, the ‘banana’ variable is not undefined like the last example, it is undeclared. Undefined is NOT the same thing as undeclared, as undefined means that a variable does exist, it just has no value. Whereas undeclared means that the variable does not exist."],
        ["p", "So what is happening here? Is hoisting going on or not? Well, nothing in the code is being ‘moved’ anywhere else. What the JavaScript engine is really doing is running through the code multiple times. The first time is the compiling phase, where it is looking for any variable for function declarations. With a variable declaration, all that the engine cares about is the declaration, not the initialization. This is why, in example 2, we received ‘undefined’ as the value for banana. JavaScript was aware that we declared a banana variable, as evidenced by the fact that we did not get a reference error, however clearly the compiling phase did not check to see what we wanted to set banana equal to. When we ran console.log(banana), JavaScript did not know the value of banana because we haven’t set that yet in the code, and it does not look at it during the compiling phase."],
        ["p", "So how did the first example work with the printStuff function? Because we did not call for a function initialization by setting it equal to a variable like so:"],
        ["img", "/public/blog/scope/example4.JPG"],
        ["p", "Why didn’t this code work? Because here we tried to use an initialization again. Read the error message, JavaScript did not throw a reference error to PrintNow, meaning that it had already seen it in the compiling phase. However like the variable initialization in example 2, our variable here is coming back undefined again, which is why JavaScript is telling us that PrintNow is not a function."],
        ["p", "But a function declaration is different. Instead of both declaring a variable and then initializing a value like the past example, a function declaration is compiled in its entirety. This means that we can call for a function that is later declared and JavaScript will be able to run our code."],
        ["p", "The last thing to remember about hoisting: It’s not real! It’s simply a way that is supposed to simplify the way declarations work in JavaScript. Personally I think it would be easier to just teach what is actually going on – that there is a compilation phase followed by an execution phase, and that the JavaScript engine actually runs through our code multiple times."]


      ]
    },
    {
      "id": "p1",
      "title": "IIFEs and Modules",
      "url": "iife",
      "teaser": "What an IIFE is and how it can be useful",
      "date": "Jan 18, 2016",
      "content": [
        ["p", "IIFE stands for an immediately invoked function expression. It has a few benefits:"],
        ["ol", ["Creates a new scope for variables, which prevents poling the global scope.", "Is great for creating modules as it can contain both public and private methods", "Leads to cleaner code because it is executed immediately and does not have to be both defined and then later called."]],
        ["p", "The syntax for an iife is below:"],
        ["img", "/public/blog/iife/iife1.JPG"],
        ["p", "The extra parentheses at the end are what immidately invoke (hence the name) the function, without being explicitly called later. Those parentheses can be placed either directly after or before the closing parentheses that wraps the function. An iife can also take an argument:"],
        ["img", "/public/blog/iife/iife2.JPG"],
        ["p", "An iife is a great way to create a module in JavaScript since it can contain both public and private methods. It can also be saved to a variable. These features are all shown below:"],
        ["img", "/public/blog/iife/iife3.JPG"],
        ["p", "There are a number of cool things going on here. First, the backticks ( ` ) are a new ES6 feature that allow for string interpolation in JavaScript. But back to the IIFE, by saving it to the variable myModule it is no longer being invoked at runtime, but rather is accessible to us later in the program. When we call the sayEverything method on line 23, sayEverything is able to access both the sayAge and sayFood methods, which are both private and inaccessible directly from the global scope. On line 24 the takeArg method shows that we can pass in a parameter to one of these public methods. Line 25 shows that none of the function defined outside of the return are private, and not available from the global scope. To make a method public, simply define it inside of the return, and separate multiple functions with commas. These public methods have access to all private functions and variables defined inside of the IIFE."]

      ]
    }

  ]
}